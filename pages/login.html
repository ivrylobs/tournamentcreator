<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="style/indexStyle.css" />
    <link rel="stylesheet" href="style/login.css">
    <link rel="icon" type="image/png" href="images/Tournament.png" />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tournament Creator</title>
</head>

<body>
    <nav>
        <div class="logo">
            <a href="/">
                <img src="/images/Tournaments_Text.png" alt="" height="44px" />
            </a>
            <li><a href="/">Home</a></li>
            <li><a href="/tournament">Tournament</a></li>
            <li><a href="/communities">Communities</a></li>
            <li><a href="/about">About</a></li>
        </div>

        <div class="menu_button">
            <li><a href="/register">Sign up</a></li>
            <li><a class="active" href="/login">Login</a></li>
        </div>
    </nav>

    <div class="login-page">
        <div class="form">
            <form class="login-form">
                <input name="userName" type="text" placeholder="email" />
                <input name="passWord" type="password" placeholder="password" />
                <button id="loginButton">login</button>
                <p class="message">Not registered? <a href="/register">Create an account</a></p>
            </form>
        </div>
    </div>

    <script>
        document.getElementById("loginButton").addEventListener("click", function() {
            var loginForm = document.querySelector("form")

            var userName = loginForm["userName"].value
            var password = loginForm["passWord"].value

            const params = new URLSearchParams()

            params.append("username", userName)
            params.append("password", password)
            axios.post("/user/signin", params).then(function(response) {
    
                if ("successfull" == "successfull") {
                    window.location.href = "/homeuser"
                } else {
                    alert("Your username or password is invalid")
                }
            }).catch(function(err) {
                console.log(err)
            })
        })
    </script>
</body>

</html>